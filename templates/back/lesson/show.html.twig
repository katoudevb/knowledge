{% extends 'base.html.twig' %}

{% block title %}Leçon{% endblock %}

{% block page_title %}Détails de la leçon{% endblock %}

{% block body %}
<div class="card shadow-sm rounded-3 p-4 my-4">
    <h2 class="h5 mb-3">Informations sur la leçon</h2>

    <table class="table table-striped table-bordered table-hover">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ lesson.id }}</td>
            </tr>
            <tr>
                <th>Titre</th>
                <td>{{ lesson.title }}</td>
            </tr>
            <tr>
                <th>Prix</th>
                <td>{{ lesson.price }} €</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>
                    {% if lesson.content %}
                        {{ lesson.content|raw }}
                    {% else %}
                        <p class="text-muted">Aucun contenu disponible.</p>
                    {% endif %}

                    {% if lesson.videoUrl %}
                        <h3 class="mt-3">Vidéo :</h3>
                        {% if lesson.videoUrl ends with '.mp4' %}
                            <video width="400" controls class="mt-2">
                                <source src="{{ lesson.videoUrl }}" type="video/mp4">
                                Votre navigateur ne supporte pas la lecture de vidéo.
                            </video>
                        {% else %}
                            {% set youtube_id = lesson.videoUrl | replace({'https://www.youtube.com/watch?v=': ''}) %}
                            <iframe width="400" height="225" class="mt-2"
                                    src="https://www.youtube.com/embed/{{ youtube_id }}"
                                    frameborder="0" allowfullscreen></iframe>
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
        </tbody>
    </table>

    <div class="mt-3 d-flex gap-2">
        <a href="{{ path('admin_lesson_index') }}" class="btn btn-secondary">← Retour à la liste</a>
        <a href="{{ path('admin_lesson_edit', {'id': lesson.id}) }}" class="btn btn-primary">Modifier</a>
        {{ include('back/lesson/_delete_form.html.twig') }}
    </div>
</div>
{% endblock %}
